import{r as l,j as e}from"./entry-1765759384261-index.js";const y=({isOpen:x,onClose:d})=>{const[m,n]=l.useState(!1),[i,c]=l.useState(!1),[a,o]=l.useState({steps:0,heartRate:0,sleep:0,calories:0,distance:0,workouts:[]}),[p,h]=l.useState(null);l.useEffect(()=>{const s=localStorage.getItem("appleHealthAuthorized")==="true";n(s);const t=localStorage.getItem("appleHealthData");t&&o(JSON.parse(t));const r=localStorage.getItem("appleHealthLastSync");r&&h(new Date(r))},[]);const j=async()=>{c(!0);try{await new Promise(s=>setTimeout(s,2e3)),n(!0),localStorage.setItem("appleHealthAuthorized","true"),await u()}catch{alert("Failed to authorize Apple Health access. Please check your settings.")}finally{c(!1)}},u=async()=>{if(!m&&!localStorage.getItem("appleHealthAuthorized")){alert("Please authorize Apple Health access first");return}c(!0);try{await new Promise(r=>setTimeout(r,1500));const s=new Date,t={steps:Math.floor(Math.random()*5e3)+6e3,heartRate:Math.floor(Math.random()*30)+65,sleep:(Math.random()*2+6).toFixed(1),calories:Math.floor(Math.random()*500)+1800,distance:(Math.random()*3+4).toFixed(2),workouts:[{type:"Running",duration:30,calories:240,time:"08:00 AM"},{type:"Cycling",duration:45,calories:320,time:"06:30 PM"}]};o(t),h(s),localStorage.setItem("appleHealthData",JSON.stringify(t)),localStorage.setItem("appleHealthLastSync",s.toISOString())}catch{alert("Failed to sync health data. Please try again.")}finally{c(!1)}},v=()=>{confirm("Are you sure you want to revoke Apple Health access?")&&(n(!1),localStorage.removeItem("appleHealthAuthorized"),localStorage.removeItem("appleHealthData"),localStorage.removeItem("appleHealthLastSync"),o({steps:0,heartRate:0,sleep:0,calories:0,distance:0,workouts:[]}),h(null))};return x?e.jsx("div",{className:"apple-health-overlay",onClick:d,children:e.jsxs("div",{className:"apple-health-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"apple-health-close",onClick:d,children:"âœ•"}),e.jsxs("div",{className:"apple-health-header",children:[e.jsx("div",{className:"health-icon",children:"â¤ï¸"}),e.jsx("h2",{children:"Apple Health Sync"}),e.jsx("p",{children:"Integrate your Apple Health data seamlessly"})]}),m?e.jsxs("div",{className:"health-data-section",children:[e.jsxs("div",{className:"sync-controls",children:[e.jsx("button",{className:"sync-btn",onClick:u,disabled:i,children:i?"â³ Syncing...":"ğŸ”„ Sync Now"}),p&&e.jsxs("p",{className:"last-sync",children:["Last synced: ",p.toLocaleTimeString()]})]}),e.jsxs("div",{className:"health-stats-grid",children:[e.jsxs("div",{className:"health-stat",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ‘Ÿ"}),e.jsx("div",{className:"stat-value",children:a.steps.toLocaleString()}),e.jsx("div",{className:"stat-label",children:"Steps"})]}),e.jsxs("div",{className:"health-stat",children:[e.jsx("div",{className:"stat-icon",children:"â¤ï¸"}),e.jsx("div",{className:"stat-value",children:a.heartRate}),e.jsx("div",{className:"stat-label",children:"BPM"})]}),e.jsxs("div",{className:"health-stat",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ˜´"}),e.jsxs("div",{className:"stat-value",children:[a.sleep,"h"]}),e.jsx("div",{className:"stat-label",children:"Sleep"})]}),e.jsxs("div",{className:"health-stat",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ”¥"}),e.jsx("div",{className:"stat-value",children:a.calories}),e.jsx("div",{className:"stat-label",children:"Calories"})]}),e.jsxs("div",{className:"health-stat",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“"}),e.jsx("div",{className:"stat-value",children:a.distance}),e.jsx("div",{className:"stat-label",children:"km"})]}),e.jsxs("div",{className:"health-stat",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ’ª"}),e.jsx("div",{className:"stat-value",children:a.workouts.length}),e.jsx("div",{className:"stat-label",children:"Workouts"})]})]}),a.workouts.length>0&&e.jsxs("div",{className:"workouts-section",children:[e.jsx("h3",{children:"ğŸƒ Today's Workouts"}),e.jsx("div",{className:"workouts-list",children:a.workouts.map((s,t)=>e.jsxs("div",{className:"workout-item",children:[e.jsxs("div",{className:"workout-info",children:[e.jsx("span",{className:"workout-type",children:s.type}),e.jsx("span",{className:"workout-time",children:s.time})]}),e.jsxs("div",{className:"workout-stats",children:[e.jsxs("span",{children:["â±ï¸ ",s.duration," min"]}),e.jsxs("span",{children:["ğŸ”¥ ",s.calories," cal"]})]})]},t))})]}),e.jsx("button",{className:"revoke-btn",onClick:v,children:"âš ï¸ Revoke Access"})]}):e.jsxs("div",{className:"health-auth-section",children:[e.jsxs("div",{className:"auth-info",children:[e.jsx("h3",{children:"ğŸ“Š What we'll access:"}),e.jsxs("ul",{className:"permissions-list",children:[e.jsx("li",{children:"ğŸ‘Ÿ Steps & Distance"}),e.jsx("li",{children:"â¤ï¸ Heart Rate"}),e.jsx("li",{children:"ğŸ˜´ Sleep Analysis"}),e.jsx("li",{children:"ğŸ”¥ Calories Burned"}),e.jsx("li",{children:"ğŸ’ª Workout Sessions"}),e.jsx("li",{children:"âš–ï¸ Body Measurements"})]}),e.jsxs("div",{className:"privacy-note",children:[e.jsx("span",{children:"ğŸ”’"}),e.jsx("p",{children:"Your health data is private and encrypted. We never share it with third parties."})]})]}),e.jsx("button",{className:"authorize-btn",onClick:j,disabled:i,children:i?e.jsx("span",{children:"â³ Authorizing..."}):e.jsx("span",{children:"âœ“ Authorize Apple Health"})})]})]})}):null};export{y as default};

import{a as y,r as u,j as e,f as c}from"./entry-1765887266798-index.js";import{C as M}from"./chunk-1765887267003-index.js";import{healthAvatarService as O}from"./chunk-1765887266801-healthAvatarService.js";function G({onComplete:f}){const a=y.getCurrentUser()?.profile||{},[r,d]=u.useState(1),[N,S]=u.useState(a.avatar||"üßò"),[g,H]=u.useState(a.photo||null),[p,b]=u.useState(a.allergens||[]),[v,k]=u.useState(a.dietaryPreferences||[]),[i,m]=u.useState({fullName:a.fullName||"",age:a.age?String(a.age):"",gender:a.gender||"",height:a.height?String(a.height):"",weight:a.weight?String(a.weight):"",goalSteps:a.goalSteps?String(a.goalSteps):"10000",bloodType:a.bloodType||""}),[t,x]=u.useState({conditions:a.medicalConditions||[],medications:a.medications||[],injuries:a.injuries||[],surgeries:a.surgeries||"",familyHistory:a.familyHistory||[]}),[l,h]=u.useState({fitnessLevel:a.fitnessLevel||"",exerciseFrequency:a.exerciseFrequency||"",sleepHours:a.sleepHours?String(a.sleepHours):"",stressLevel:a.stressLevel||"",smoker:a.smoker||!1,alcoholFrequency:a.alcoholFrequency||"",waterIntake:a.waterIntake||"",workType:a.workType||""}),A=["üßò","üèÉ","üí™","üßó","üö¥","üèä","‚õπÔ∏è","ü§∏","ü§æ","üèãÔ∏è","ü§∫","‚õ∑Ô∏è"],w=[{name:"gluten",icon:"üåæ",severity:"moderate"},{name:"dairy",icon:"ü•õ",severity:"moderate"},{name:"nuts",icon:"ü•ú",severity:"severe"},{name:"shellfish",icon:"ü¶ê",severity:"severe"},{name:"eggs",icon:"ü•ö",severity:"moderate"},{name:"soy",icon:"ü´ò",severity:"moderate"},{name:"fish",icon:"üêü",severity:"severe"},{name:"sesame",icon:"üå∞",severity:"moderate"}],L=[{name:"vegetarian",icon:"ü•ó"},{name:"vegan",icon:"üå±"},{name:"keto",icon:"ü•ë"},{name:"paleo",icon:"üçñ"},{name:"halal",icon:"‚ò™Ô∏è"},{name:"kosher",icon:"‚ú°Ô∏è"}],C=async()=>{try{const s=await M.getPhoto({quality:90,allowEditing:!0,resultType:"base64",source:"CAMERA"});H(`data:image/jpeg;base64,${s.base64String}`)}catch{}},F=s=>{p.includes(s.name)?b(p.filter(o=>o!==s.name)):b([...p,s.name])},I=s=>{v.includes(s.name)?k(v.filter(o=>o!==s.name)):k([...v,s.name])},P=[{name:"diabetes",icon:"ü©∏"},{name:"hypertension",icon:"üíî"},{name:"asthma",icon:"ü´Å"},{name:"arthritis",icon:"ü¶¥"},{name:"heart-disease",icon:"‚ù§Ô∏è"},{name:"thyroid",icon:"ü¶ã"},{name:"migraine",icon:"ü§ï"},{name:"anxiety",icon:"üò∞"},{name:"depression",icon:"üòî"}],q=["diabetes","heart-disease","cancer","alzheimers","stroke","hypertension"],B=s=>{t.conditions.includes(s)?x({...t,conditions:t.conditions.filter(o=>o!==s)}):x({...t,conditions:[...t.conditions,s]})},T=s=>{t.familyHistory.includes(s)?x({...t,familyHistory:t.familyHistory.filter(o=>o!==s)}):x({...t,familyHistory:[...t.familyHistory,s]})},$=async()=>{try{const s={};p.forEach(n=>{const D=w.find(E=>E.name===n);s[n]=D?.severity||"moderate"});const o=i.height/100,j=i.weight/(o*o);await y.updateProfile({avatar:g||N,photo:g,fullName:i.fullName||"",age:i.age?parseInt(i.age):void 0,gender:i.gender||"",height:i.height?parseInt(i.height):void 0,weight:i.weight?parseInt(i.weight):void 0,bmi:j&&!isNaN(j)?parseFloat(j.toFixed(1)):void 0,bloodType:i.bloodType||"",goalSteps:i.goalSteps?parseInt(i.goalSteps):1e4,allergens:p,allergenSeverity:s,dietaryPreferences:v,medicalConditions:t.conditions,medications:t.medications,injuries:t.injuries,surgeries:t.surgeries,familyHistory:t.familyHistory,fitnessLevel:l.fitnessLevel||"",exerciseFrequency:l.exerciseFrequency||"",sleepHours:l.sleepHours?parseInt(l.sleepHours):void 0,stressLevel:l.stressLevel||"",smoker:l.smoker||!1,alcoholFrequency:l.alcoholFrequency||"",waterIntake:l.waterIntake||"",workType:l.workType||"",profileCompleted:!0,profileCompletedDate:new Date().toISOString()});try{const n=y.getCurrentUser()?.uid;await c.get("stepHistory",n)||await c.save("stepHistory",{},n),await c.get("foodLog",n)||await c.save("foodLog",[],n),await c.get("workoutHistory",n)||await c.save("workoutHistory",[],n),await c.get("sleepLog",n)||await c.save("sleepLog",[],n),await c.get("waterLog",n)||await c.save("waterLog",[],n),await c.get("weeklySteps",n)||await c.save("weeklySteps",[],n)}catch{}O.clearCache(),f()}catch(s){alert("Error saving profile: "+s.message+`

Please try again or contact support.`)}};return e.jsx("div",{className:"profile-setup-overlay",children:e.jsxs("div",{className:"profile-setup",children:[e.jsx("button",{className:"modal-close",onClick:f,style:{position:"absolute",top:"15px",right:"15px",background:"#8B5FE8",border:"none",color:"white",fontSize:"28px",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:10},children:"√ó"}),e.jsx("h2",{children:"üß¨ Complete Your Health Profile"}),e.jsxs("div",{className:"setup-progress",children:[e.jsx("div",{className:`progress-dot ${r>=1?"active":""}`,children:"1"}),e.jsx("div",{className:`progress-line ${r>=2?"active":""}`}),e.jsx("div",{className:`progress-dot ${r>=2?"active":""}`,children:"2"}),e.jsx("div",{className:`progress-line ${r>=3?"active":""}`}),e.jsx("div",{className:`progress-dot ${r>=3?"active":""}`,children:"3"}),e.jsx("div",{className:`progress-line ${r>=4?"active":""}`}),e.jsx("div",{className:`progress-dot ${r>=4?"active":""}`,children:"4"}),e.jsx("div",{className:`progress-line ${r>=5?"active":""}`}),e.jsx("div",{className:`progress-dot ${r>=5?"active":""}`,children:"5"})]}),r===1&&e.jsxs("div",{className:"setup-step",children:[e.jsx("h3",{children:"Choose Your Avatar"}),g?e.jsxs("div",{className:"photo-preview",children:[e.jsx("img",{src:g,alt:"Profile"}),e.jsx("button",{className:"change-photo",onClick:C,children:"Change Photo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"avatar-grid",children:A.map(s=>e.jsx("button",{className:`avatar-option ${N===s?"selected":""}`,onClick:()=>S(s),children:s},s))}),e.jsx("button",{className:"take-photo-btn",onClick:C,children:"üì∑ Or Take a Photo"})]}),e.jsx("button",{className:"next-btn",onClick:()=>d(2),children:"Next ‚Üí"})]}),r===2&&e.jsxs("div",{className:"setup-step",children:[e.jsx("h3",{children:"Your Allergens & Diet"}),e.jsx("p",{className:"subtitle",children:"Select any allergens you need to avoid"}),e.jsx("div",{className:"allergen-grid",children:w.map(s=>e.jsxs("button",{className:`allergen-card ${p.includes(s.name)?"selected":""}`,onClick:()=>F(s),children:[e.jsx("span",{className:"allergen-icon",children:s.icon}),e.jsx("span",{className:"allergen-name",children:s.name}),s.severity==="severe"&&e.jsx("span",{className:"severity-badge",children:"‚ö†Ô∏è"})]},s.name))}),e.jsx("h4",{children:"Dietary Preferences (Optional)"}),e.jsx("div",{className:"diet-grid",children:L.map(s=>e.jsxs("button",{className:`diet-card ${v.includes(s.name)?"selected":""}`,onClick:()=>I(s),children:[e.jsx("span",{className:"diet-icon",children:s.icon}),e.jsx("span",{className:"diet-name",children:s.name})]},s.name))}),e.jsxs("div",{className:"step-buttons",children:[e.jsx("button",{className:"back-btn",onClick:()=>d(1),children:"‚Üê Back"}),e.jsx("button",{className:"next-btn",onClick:()=>d(3),children:"Next ‚Üí"})]})]}),r===3&&e.jsxs("div",{className:"setup-step",children:[e.jsx("h3",{children:"üìä Basic Information"}),e.jsx("p",{className:"subtitle",children:"Essential data for your Health Avatar calculations"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Full Name *"}),e.jsx("input",{type:"text",placeholder:"John Smith",value:i.fullName,onChange:s=>m({...i,fullName:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Age *"}),e.jsx("input",{type:"number",placeholder:"25",value:i.age,onChange:s=>m({...i,age:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender *"}),e.jsxs("select",{value:i.gender,onChange:s=>m({...i,gender:s.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Height (cm) *"}),e.jsx("input",{type:"number",placeholder:"175",value:i.height,onChange:s=>m({...i,height:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Weight (kg) *"}),e.jsx("input",{type:"number",placeholder:"70",value:i.weight,onChange:s=>m({...i,weight:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Blood Type"}),e.jsxs("select",{value:i.bloodType,onChange:s=>m({...i,bloodType:s.target.value}),children:[e.jsx("option",{value:"",children:"Unknown"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Daily Step Goal"}),e.jsx("input",{type:"number",placeholder:"10000",value:i.goalSteps,onChange:s=>m({...i,goalSteps:s.target.value})})]})]}),e.jsxs("div",{className:"step-buttons",children:[e.jsx("button",{className:"back-btn",onClick:()=>d(2),children:"‚Üê Back"}),e.jsx("button",{className:"next-btn",onClick:()=>d(4),children:"Next ‚Üí"})]})]}),r===4&&e.jsxs("div",{className:"setup-step",children:[e.jsx("h3",{children:"üè• Medical History"}),e.jsx("p",{className:"subtitle",children:"Helps calculate accurate health predictions (all optional)"}),e.jsx("h4",{children:"Existing Conditions"}),e.jsx("div",{className:"condition-grid",children:P.map(s=>e.jsxs("button",{className:`condition-card ${t.conditions.includes(s.name)?"selected":""}`,onClick:()=>B(s.name),children:[e.jsx("span",{className:"condition-icon",children:s.icon}),e.jsx("span",{className:"condition-name",children:s.name})]},s.name))}),e.jsx("h4",{children:"Current Medications"}),e.jsx("textarea",{className:"medications-input",placeholder:"List any medications you're currently taking (optional)",value:t.medications.join(`
`),onChange:s=>x({...t,medications:s.target.value.split(`
`).filter(o=>o.trim())}),rows:"3"}),e.jsx("h4",{children:"Family History"}),e.jsx("p",{className:"subtitle-small",children:"Select any conditions in your immediate family"}),e.jsx("div",{className:"family-history-grid",children:q.map(s=>e.jsx("button",{className:`family-history-btn ${t.familyHistory.includes(s)?"selected":""}`,onClick:()=>T(s),children:s},s))}),e.jsxs("div",{className:"step-buttons",children:[e.jsx("button",{className:"back-btn",onClick:()=>d(3),children:"‚Üê Back"}),e.jsx("button",{className:"next-btn",onClick:()=>d(5),children:"Next ‚Üí"})]})]}),r===5&&e.jsxs("div",{className:"setup-step",children:[e.jsx("h3",{children:"üèÉ Lifestyle & Habits"}),e.jsx("p",{className:"subtitle",children:"Critical for accurate health projections"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Fitness Level"}),e.jsxs("select",{value:l.fitnessLevel,onChange:s=>h({...l,fitnessLevel:s.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"sedentary",children:"Sedentary (little exercise)"}),e.jsx("option",{value:"lightly-active",children:"Lightly Active (1-2 days/week)"}),e.jsx("option",{value:"moderately-active",children:"Moderately Active (3-5 days/week)"}),e.jsx("option",{value:"very-active",children:"Very Active (6-7 days/week)"}),e.jsx("option",{value:"athlete",children:"Athlete (training daily)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Exercise Frequency"}),e.jsxs("select",{value:l.exerciseFrequency,onChange:s=>h({...l,exerciseFrequency:s.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"never",children:"Never"}),e.jsx("option",{value:"1-2-week",children:"1-2 times/week"}),e.jsx("option",{value:"3-4-week",children:"3-4 times/week"}),e.jsx("option",{value:"5-6-week",children:"5-6 times/week"}),e.jsx("option",{value:"daily",children:"Daily"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Average Sleep Hours"}),e.jsx("input",{type:"number",placeholder:"7",value:l.sleepHours,onChange:s=>h({...l,sleepHours:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Stress Level"}),e.jsxs("select",{value:l.stressLevel,onChange:s=>h({...l,stressLevel:s.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"moderate",children:"Moderate"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"very-high",children:"Very High"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Smoking Status"}),e.jsxs("select",{value:l.smoker,onChange:s=>h({...l,smoker:s.target.value==="true"}),children:[e.jsx("option",{value:"false",children:"Non-smoker"}),e.jsx("option",{value:"true",children:"Smoker"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Alcohol Consumption"}),e.jsxs("select",{value:l.alcoholFrequency,onChange:s=>h({...l,alcoholFrequency:s.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"never",children:"Never"}),e.jsx("option",{value:"rarely",children:"Rarely (1-2/month)"}),e.jsx("option",{value:"social",children:"Social (1-2/week)"}),e.jsx("option",{value:"regular",children:"Regular (3-5/week)"}),e.jsx("option",{value:"daily",children:"Daily"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Daily Water Intake"}),e.jsxs("select",{value:l.waterIntake,onChange:s=>h({...l,waterIntake:s.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"low",children:"Low (<4 glasses)"}),e.jsx("option",{value:"moderate",children:"Moderate (4-6 glasses)"}),e.jsx("option",{value:"good",children:"Good (7-8 glasses)"}),e.jsx("option",{value:"excellent",children:"Excellent (8+ glasses)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Work Type"}),e.jsxs("select",{value:l.workType,onChange:s=>h({...l,workType:s.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"sedentary",children:"Sedentary (desk job)"}),e.jsx("option",{value:"light-activity",children:"Light Activity"}),e.jsx("option",{value:"moderate-activity",children:"Moderate Activity"}),e.jsx("option",{value:"physical",children:"Physical Labor"}),e.jsx("option",{value:"very-physical",children:"Very Physical"})]})]})]}),e.jsxs("div",{className:"completion-summary",children:[e.jsx("h4",{children:"‚úÖ Profile Summary"}),e.jsx("p",{children:"Your comprehensive health profile will power:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"üß¨ Personalized Health Avatar"}),e.jsx("li",{children:"üìä Accurate BMI & health score calculations"}),e.jsx("li",{children:"üîÆ Future health predictions"}),e.jsx("li",{children:"üéØ Custom exercise & meal recommendations"}),e.jsx("li",{children:"üíä Allergen warnings & food safety"}),e.jsx("li",{children:"üè• Emergency medical data package"})]})]}),e.jsxs("div",{className:"step-buttons",children:[e.jsx("button",{className:"back-btn",onClick:()=>d(4),children:"‚Üê Back"}),e.jsx("button",{className:"complete-btn",onClick:$,children:"Complete Profile ‚úì"})]})]})]})})}export{G as default};

import{r as o,s as j,j as e,l as d}from"./entry-1765759384261-index.js";import S from"./chunk-1765759384264-PaywallModal.js";/* empty css                                */function C({onClose:v}){const[N,h]=o.useState(!1),[a,p]=o.useState(null),[r,u]=o.useState(null),[n,m]=o.useState("traits"),[f,g]=o.useState(!0),[y,b]=o.useState(!1);o.useEffect(()=>{if(!j.hasAccess("dnaAnalysis")){b(!0),g(!1);return}(async()=>{if(await d.loadSavedData()){const c=d.getFullDNAReport();c&&(p(c),u(d.analysis))}g(!1)})()},[]);const k=async s=>{const i=s.target.files[0];if(i){h(!0);try{const c=new FileReader;c.onerror=l=>{alert("Failed to read file: "+l),h(!1)},c.onload=async l=>{try{const t=l.target.result,x=await d.uploadDNAData(t,i.name);if(x.success){const w=d.getFullDNAReport();p(w),await d.analyzeGenetics();const D=d.analysis;u(D),alert(`‚úÖ DNA Analysis Complete!
${x.traitsFound||0} genetic markers analyzed`)}else alert("‚ùå Failed to parse DNA file: "+(x.error||"Unknown error"));h(!1)}catch(t){alert("Failed to process DNA data: "+t.message),h(!1)}},c.readAsText(i)}catch(c){alert("Failed to upload DNA data: "+c.message),h(!1)}}},A=()=>{const s=d.getFullDNAReport();if(!s){alert("No DNA data to export");return}const i={uploadDate:s.uploadDate,source:s.source,snpsAnalyzed:s.geneticTraits.length,traits:s.geneticTraits,analysis:s.analysis},c=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),l=URL.createObjectURL(c),t=document.createElement("a");t.href=l,t.download=`dna-analysis-${new Date().toISOString().split("T")[0]}.json`,t.click(),URL.revokeObjectURL(l),alert("‚úÖ DNA results saved to Downloads!")};return e.jsxs("div",{className:"dna-overlay",children:[e.jsxs("div",{className:"dna-modal",children:[e.jsx("button",{className:"dna-close",onClick:v,children:"‚úï"}),e.jsx("h2",{className:"dna-title",children:"üß¨ DNA Personalization"}),f?e.jsxs("div",{className:"dna-upload-section",children:[e.jsx("div",{className:"dna-icon",children:"‚è≥"}),e.jsx("h3",{children:"Loading DNA Data..."})]}):a?e.jsxs("div",{className:"dna-results",children:[e.jsxs("div",{className:"dna-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="traits"?"active":""}`,onClick:()=>m("traits"),children:"üß¨ Traits"}),e.jsx("button",{className:`tab-btn ${n==="ancestry"?"active":""}`,onClick:()=>m("ancestry"),children:"üåç Ancestry"}),e.jsx("button",{className:`tab-btn ${n==="athletic"?"active":""}`,onClick:()=>m("athletic"),children:"üèÉ Athletic"}),e.jsx("button",{className:`tab-btn ${n==="meals"?"active":""}`,onClick:()=>m("meals"),children:"üçΩÔ∏è Nutrition"}),e.jsx("button",{className:`tab-btn ${n==="meds"?"active":""}`,onClick:()=>m("meds"),children:"üíä Meds"}),e.jsx("button",{className:`tab-btn ${n==="risks"?"active":""}`,onClick:()=>m("risks"),children:"‚ö†Ô∏è Risks"})]}),n==="traits"&&a&&e.jsxs("div",{className:"traits-view",children:[e.jsxs("div",{className:"dna-summary",children:[e.jsx("h3",{children:"DNA Analysis Complete"}),e.jsxs("div",{className:"snp-count",children:["üìä Analyzed ",e.jsx("strong",{children:a.geneticTraits?.length||0})," genetic markers"]}),e.jsxs("div",{className:"source-info",children:["üß¨ Source: ",a.source||"Unknown"]}),e.jsx("button",{className:"export-btn",onClick:A,children:"üíæ Save Results"})]}),e.jsx("h3",{children:"Your Genetic Traits"}),e.jsx("div",{className:"traits-list",children:a.geneticTraits?.map((s,i)=>e.jsxs("div",{className:`trait-card risk-${s.risk}`,children:[e.jsxs("div",{className:"trait-header",children:[e.jsx("span",{className:"trait-gene",children:s.gene}),e.jsx("span",{className:"trait-genotype",children:s.genotype})]}),e.jsx("div",{className:"trait-name",children:s.trait.replace(/([A-Z])/g," $1").trim()}),e.jsx("div",{className:"trait-value",children:s.value}),e.jsx("div",{className:"trait-description",children:s.description}),s.rsid!=="demo"&&e.jsxs("div",{className:"trait-rsid",children:["SNP: ",s.rsid]})]},i))})]}),n==="meals"&&a&&e.jsxs("div",{className:"meals-view",children:[e.jsx("h3",{children:"DNA-Optimized Nutrition"}),r&&r.foodsToEmphasize?e.jsxs("div",{className:"recommendations-list",children:[e.jsxs("div",{className:"diet-section",children:[e.jsx("h4",{children:"‚úÖ Foods to Emphasize:"}),e.jsx("div",{className:"food-tags",children:r.foodsToEmphasize?.map((s,i)=>e.jsx("span",{className:"food-tag good",children:s},i))})]}),e.jsxs("div",{className:"diet-section",children:[e.jsx("h4",{children:"‚ö†Ô∏è Foods to Limit/Avoid:"}),e.jsx("div",{className:"food-tags",children:r.foodsToAvoid?.map((s,i)=>e.jsx("span",{className:"food-tag avoid",children:s},i))})]}),e.jsxs("div",{className:"diet-section",children:[e.jsx("h4",{children:"üíä Supplement Recommendations:"}),e.jsx("div",{className:"food-tags",children:r.supplementAdvice?.map((s,i)=>e.jsx("span",{className:"food-tag supplement",children:s},i))})]})]}):e.jsx("div",{className:"loading-msg",children:"‚è≥ Analyzing your genetics for personalized nutrition..."})]}),n==="exercise"&&a&&e.jsxs("div",{className:"exercise-view",children:[e.jsx("h3",{children:"Genetic Exercise Plan"}),r&&r.exerciseRecommendations?e.jsx("div",{className:"exercise-plan",children:e.jsx("div",{className:"exercise-list",children:r.exerciseRecommendations.map((s,i)=>e.jsxs("div",{className:"exercise-card",children:[e.jsx("div",{className:"exercise-icon",children:"üí™"}),e.jsx("div",{className:"exercise-content",children:s})]},i))})}):e.jsx("div",{className:"loading-msg",children:"‚è≥ Generating personalized workout plan..."})]}),n==="ancestry"&&a?.ancestryBreakdown&&e.jsxs("div",{className:"ancestry-view",children:[e.jsx("h3",{children:"üåç Your Ancestry Breakdown"}),e.jsxs("div",{className:"diversity-score",children:[e.jsxs("div",{children:["Genetic Diversity Score: ",e.jsxs("strong",{children:[a.ancestryBreakdown.diversityScore,"/100"]})]}),e.jsx("div",{className:"diversity-bar",style:{width:`${a.ancestryBreakdown.diversityScore}%`}})]}),e.jsx("div",{className:"ancestry-list",children:a.ancestryBreakdown.breakdown.map((s,i)=>e.jsxs("div",{className:"ancestry-card",children:[e.jsxs("div",{className:"ancestry-header",children:[e.jsx("span",{className:"ancestry-region",children:s.region}),e.jsxs("span",{className:"ancestry-percentage",children:[s.percentage,"%"]})]}),e.jsx("div",{className:"ancestry-bar-container",children:e.jsx("div",{className:"ancestry-bar",style:{width:`${s.percentage}%`}})}),e.jsx("div",{className:"ancestry-countries",children:s.countries.join(", ")})]},i))})]}),n==="athletic"&&a?.athleticProfile&&e.jsxs("div",{className:"athletic-view",children:[e.jsx("h3",{children:"üèÉ Your Athletic Genetic Profile"}),e.jsxs("div",{className:"athletic-scores",children:[e.jsxs("div",{className:"score-card",children:[e.jsx("div",{className:"score-label",children:"Power"}),e.jsxs("div",{className:"score-value",children:[a.athleticProfile.powerScore,"/100"]}),e.jsx("div",{className:"score-bar",children:e.jsx("div",{style:{width:`${a.athleticProfile.powerScore}%`}})})]}),e.jsxs("div",{className:"score-card",children:[e.jsx("div",{className:"score-label",children:"Endurance"}),e.jsxs("div",{className:"score-value",children:[a.athleticProfile.enduranceScore,"/100"]}),e.jsx("div",{className:"score-bar",children:e.jsx("div",{style:{width:`${a.athleticProfile.enduranceScore}%`}})})]})]}),e.jsxs("div",{className:"athletic-traits",children:[e.jsxs("div",{className:"trait-row",children:[e.jsx("strong",{children:"Recovery Speed:"})," ",a.athleticProfile.recoverySpeed]}),e.jsxs("div",{className:"trait-row",children:[e.jsx("strong",{children:"Injury Risk:"})," ",a.athleticProfile.injuryRisk]}),e.jsxs("div",{className:"trait-row",children:[e.jsx("strong",{children:"Optimal Training:"})," ",a.athleticProfile.optimalTrainingType]})]}),e.jsx("h4",{children:"Genetic Markers:"}),e.jsx("div",{className:"genes-list",children:a.athleticProfile.genes.map((s,i)=>e.jsxs("div",{className:"gene-card",children:[e.jsxs("div",{className:"gene-name",children:[s.gene," (",s.result,")"]}),e.jsx("div",{className:"gene-trait",children:s.trait}),e.jsxs("div",{className:"gene-score",children:["Score: ",s.score,"/100"]})]},i))}),e.jsx("h4",{children:"Recommendations:"}),a.athleticProfile.recommendations.map((s,i)=>e.jsxs("div",{className:"recommendation",children:["‚úì ",s]},i))]}),n==="meds"&&a?.pharmacogenomics&&e.jsxs("div",{className:"meds-view",children:[e.jsx("h3",{children:"üíä Medication Response Profile"}),e.jsx("p",{className:"warning-text",children:"‚ö†Ô∏è Informational only - always consult your doctor before changing medications"}),e.jsx("div",{className:"meds-list",children:a.pharmacogenomics.map((s,i)=>e.jsxs("div",{className:`med-card risk-${s.riskLevel}`,children:[e.jsxs("div",{className:"med-header",children:[e.jsx("span",{className:"med-name",children:s.drug}),e.jsx("span",{className:`risk-badge ${s.riskLevel}`,children:s.riskLevel.toUpperCase()})]}),e.jsxs("div",{className:"med-gene",children:["Gene: ",s.gene]}),e.jsx("div",{className:"med-recommendation",children:e.jsx("strong",{children:s.recommendation})}),e.jsx("div",{className:"med-description",children:s.description})]},i))})]}),n==="risks"&&a?.healthRiskScores&&e.jsxs("div",{className:"risks-view",children:[e.jsx("h3",{children:"‚ö†Ô∏è Health Risk Assessment"}),e.jsx("p",{className:"info-text",children:"Lifetime risk percentages compared to population average"}),e.jsx("div",{className:"risks-detailed-list",children:a.healthRiskScores.map((s,i)=>e.jsxs("div",{className:`risk-detailed-card ${s.riskLevel.replace(/ /g,"-").toLowerCase()}`,children:[e.jsxs("div",{className:"risk-detailed-header",children:[e.jsx("span",{className:"condition-name",children:s.condition}),e.jsx("span",{className:`risk-level-badge ${s.riskLevel.replace(/ /g,"-").toLowerCase()}`,children:s.riskLevel})]}),e.jsxs("div",{className:"risk-comparison",children:[e.jsxs("div",{className:"risk-bar-row",children:[e.jsx("span",{children:"Your Risk:"}),e.jsx("div",{className:"risk-bar-container",children:e.jsx("div",{className:"risk-bar your-risk",style:{width:`${s.yourRisk}%`}})}),e.jsxs("span",{children:[s.yourRisk,"%"]})]}),e.jsxs("div",{className:"risk-bar-row",children:[e.jsx("span",{children:"Average:"}),e.jsx("div",{className:"risk-bar-container",children:e.jsx("div",{className:"risk-bar avg-risk",style:{width:`${s.populationAverage}%`}})}),e.jsxs("span",{children:[s.populationAverage,"%"]})]})]}),e.jsxs("div",{className:"risk-genes",children:["Genes analyzed: ",s.genes.join(", ")]}),e.jsxs("div",{className:"prevention-tips",children:[e.jsx("strong",{children:"Prevention:"}),e.jsx("ul",{children:s.preventionTips.map((c,l)=>e.jsx("li",{children:c},l))})]})]},i))})]}),n==="meals"&&a?.nutritionGenetics&&e.jsxs("div",{className:"nutrition-view-pro",children:[e.jsx("h3",{children:"üçΩÔ∏è Personalized Nutrition Genetics"}),e.jsxs("div",{className:"macro-section",children:[e.jsx("h4",{children:"Macronutrient Recommendations"}),e.jsxs("div",{className:"macro-cards",children:[e.jsxs("div",{className:"macro-card",children:[e.jsx("div",{className:"macro-name",children:"Carbohydrates"}),e.jsx("div",{className:"macro-value",children:a.nutritionGenetics.macronutrients.carbs.recommendation}),e.jsxs("div",{className:"macro-tolerance",children:["Tolerance: ",a.nutritionGenetics.macronutrients.carbs.tolerance]})]}),e.jsxs("div",{className:"macro-card",children:[e.jsx("div",{className:"macro-name",children:"Fats"}),e.jsx("div",{className:"macro-value",children:a.nutritionGenetics.macronutrients.fats.recommendation}),e.jsxs("div",{className:"macro-tolerance",children:["Tolerance: ",a.nutritionGenetics.macronutrients.fats.tolerance]})]}),e.jsxs("div",{className:"macro-card",children:[e.jsx("div",{className:"macro-name",children:"Protein"}),e.jsx("div",{className:"macro-value",children:a.nutritionGenetics.macronutrients.protein.recommendation}),e.jsxs("div",{className:"macro-tolerance",children:["Needs: ",a.nutritionGenetics.macronutrients.protein.needs]})]})]})]}),e.jsxs("div",{className:"intolerance-section",children:[e.jsx("h4",{children:"Food Intolerances & Metabolism"}),a.nutritionGenetics.intolerances.map((s,i)=>e.jsxs("div",{className:"intolerance-card",children:[e.jsx("div",{className:"food-name",children:s.food}),e.jsxs("div",{className:"gene-info",children:["Gene: ",s.gene]}),s.metabolism&&e.jsxs("div",{className:"metabolism",children:["Metabolism: ",s.metabolism]}),s.likelihood&&e.jsxs("div",{className:"likelihood",children:["Intolerance Likelihood: ",s.likelihood]}),s.safeAmount&&e.jsxs("div",{className:"safe-amount",children:["Safe Amount: ",s.safeAmount]}),e.jsx("div",{className:`can-consume ${s.canConsume?"yes":"no"}`,children:s.canConsume?"‚úì Can Consume":"‚úó Avoid"})]},i))]}),e.jsxs("div",{className:"vitamin-section",children:[e.jsx("h4",{children:"Vitamin Absorption Profile"}),a.nutritionGenetics.vitamins.map((s,i)=>e.jsxs("div",{className:"vitamin-card",children:[e.jsx("div",{className:"vitamin-name",children:s.vitamin}),e.jsxs("div",{className:"vitamin-gene",children:["Gene: ",s.gene]}),e.jsxs("div",{className:"vitamin-absorption",children:["Absorption: ",s.absorption||s.conversion]}),e.jsx("div",{className:"vitamin-recommendation",children:e.jsx("strong",{children:s.recommendation})}),s.recommendedIU&&e.jsxs("div",{className:"dosage",children:["Recommended: ",s.recommendedIU," IU/day"]}),s.recommendedMCG&&e.jsxs("div",{className:"dosage",children:["Recommended: ",s.recommendedMCG," mcg/day"]})]},i))]}),e.jsxs("div",{className:"diet-recommendation",children:[e.jsx("h4",{children:"Optimal Diet Type"}),e.jsx("div",{className:"diet-type",children:a.nutritionGenetics.dietType}),e.jsx("div",{className:"diet-reason",children:a.nutritionGenetics.reason})]})]})]}):e.jsxs("div",{className:"dna-upload-section",children:[e.jsx("div",{className:"dna-icon",children:"üß¨"}),e.jsx("h3",{children:"Upload Your DNA Data"}),e.jsx("p",{children:"Support for 23andMe, AncestryDNA, and more"}),e.jsxs("label",{className:"upload-button",children:[N?"‚è≥ Analyzing DNA...":"üìÅ Choose File",e.jsx("input",{type:"file",accept:".txt,.csv,.json",onChange:k,disabled:N,style:{display:"none"}})]}),e.jsxs("div",{className:"supported-formats",children:[e.jsx("h4",{children:"Supported Formats:"}),e.jsxs("div",{className:"format-badges",children:[e.jsx("span",{className:"format-badge",children:"23andMe (.txt)"}),e.jsx("span",{className:"format-badge",children:"AncestryDNA (.txt)"}),e.jsx("span",{className:"format-badge",children:"MyHeritage (.csv)"})]})]}),e.jsxs("div",{className:"privacy-notice",children:[e.jsx("span",{className:"privacy-icon",children:"üîí"}),e.jsx("p",{children:"Your DNA data is encrypted and never shared. We only analyze relevant health markers."})]})]})]}),y&&e.jsx(S,{isOpen:y,onClose:v,featureName:"DNA Analysis",message:j.getUpgradeMessage("dnaAnalysis"),currentPlan:j.getCurrentPlan()})]})}export{C as default};

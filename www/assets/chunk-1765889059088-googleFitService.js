const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-1765889059505-index.js","assets/entry-1765889059086-index.js","assets/asset-1765889059669-index.css"])))=>i.map(i=>d[i]);
import{C as s,_ as l}from"./entry-1765889059086-index.js";class n{constructor(){this.isAvailable=!1,this.isInitialized=!1,this.googleFit=null}async checkAvailability(){try{if(!s.isNativePlatform()||s.getPlatform()!=="android")return console.log("Google Fit only available on Android"),!1;const{GoogleFit:t}=await l(async()=>{const{GoogleFit:r}=await import("./chunk-1765889059505-index.js");return{GoogleFit:r}},__vite__mapDeps([0,1,2]));return this.googleFit=t,this.isAvailable=!0,console.log("âœ… Google Fit available"),!0}catch(t){return console.log("Google Fit plugin not available:",t.message),!1}}async initialize(){try{if(this.isInitialized)return console.log("Google Fit already initialized"),!0;if(!await this.checkAvailability())return!1;console.log("Requesting Google Fit permissions...");const r=await this.googleFit.requestPermissions({scopes:["https://www.googleapis.com/auth/fitness.activity.read","https://www.googleapis.com/auth/fitness.location.read","https://www.googleapis.com/auth/fitness.body.read","https://www.googleapis.com/auth/fitness.sleep.read"]});return r&&r.granted?(this.isInitialized=!0,console.log("âœ… Google Fit permissions granted"),!0):(console.log("âŒ Google Fit permissions denied"),!1)}catch(t){return console.error("Error initializing Google Fit:",t),!1}}async getTodaySteps(){try{if(!this.isInitialized&&!await this.initialize())throw new Error("Google Fit not initialized");const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e=await this.googleFit.query({startDate:r.toISOString(),endDate:t.toISOString(),dataTypeName:"com.google.step_count.delta",limit:1e3});let o=0;return e&&e.buckets&&e.buckets.forEach(i=>{i.dataset&&i.dataset.length>0&&i.dataset[0].point.forEach(a=>{a.value&&a.value.length>0&&(o+=a.value[0].intVal||0)})}),console.log(`ðŸ“Š Google Fit: ${o} steps today`),o}catch(t){return console.error("Error getting steps from Google Fit:",t),0}}async getStepsInRange(t,r){try{if(!this.isInitialized&&!await this.initialize())throw new Error("Google Fit not initialized");const e=await this.googleFit.query({startDate:t.toISOString(),endDate:r.toISOString(),dataTypeName:"com.google.step_count.delta",limit:1e3});let o=0;return e&&e.buckets&&e.buckets.forEach(i=>{i.dataset&&i.dataset.length>0&&i.dataset[0].point.forEach(a=>{a.value&&a.value.length>0&&(o+=a.value[0].intVal||0)})}),o}catch(e){return console.error("Error getting steps from Google Fit:",e),0}}async getTodayDistance(){try{this.isInitialized||await this.initialize();const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e=await this.googleFit.query({startDate:r.toISOString(),endDate:t.toISOString(),dataTypeName:"com.google.distance.delta",limit:1e3});let o=0;return e&&e.buckets&&e.buckets.forEach(i=>{i.dataset&&i.dataset.length>0&&i.dataset[0].point.forEach(a=>{a.value&&a.value.length>0&&(o+=a.value[0].fpVal||0)})}),o}catch(t){return console.error("Error getting distance from Google Fit:",t),0}}async getTodayCalories(){try{this.isInitialized||await this.initialize();const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e=await this.googleFit.query({startDate:r.toISOString(),endDate:t.toISOString(),dataTypeName:"com.google.calories.expended",limit:1e3});let o=0;return e&&e.buckets&&e.buckets.forEach(i=>{i.dataset&&i.dataset.length>0&&i.dataset[0].point.forEach(a=>{a.value&&a.value.length>0&&(o+=a.value[0].fpVal||0)})}),Math.round(o)}catch(t){return console.error("Error getting calories from Google Fit:",t),0}}async getHeartRate(){try{this.isInitialized||await this.initialize();const t=new Date,r=new Date(t.getTime()-3600*1e3),e=await this.googleFit.query({startDate:r.toISOString(),endDate:t.toISOString(),dataTypeName:"com.google.heart_rate.bpm",limit:100});let o=0;return e&&e.buckets&&e.buckets.forEach(i=>{i.dataset&&i.dataset.length>0&&i.dataset[0].point.forEach(a=>{a.value&&a.value.length>0&&(o=a.value[0].fpVal||0)})}),Math.round(o)}catch(t){return console.error("Error getting heart rate from Google Fit:",t),0}}async disconnect(){try{this.googleFit&&(this.isInitialized=!1,console.log("Google Fit disconnected"))}catch(t){console.error("Error disconnecting Google Fit:",t)}}}const d=new n;export{d as default};

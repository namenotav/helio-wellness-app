import{L as a}from"./entry-1765759384261-index.js";class i{constructor(){this.init()}async init(){try{(await a.requestPermissions()).display}catch{}}async sendBattleInvite(e){try{await a.schedule({notifications:[{title:"‚öîÔ∏è Battle Invite!",body:`${e.creatorName} challenged you to a ${e.goal} battle!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"battle_invite",battleId:e.battleId}}]})}catch{}}async sendBattleEnding(e){try{const t=Math.ceil((new Date(e.endDate)-new Date)/36e5);await a.schedule({notifications:[{title:"‚è∞ Battle Ending Soon!",body:`${t} hours left in ${e.name}. Push harder!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"battle_ending",battleId:e.battleId}}]})}catch{}}async sendFallingBehind(e){try{await a.schedule({notifications:[{title:"üö® Falling Behind!",body:`You're #${e.rank} in ${e.name}. Time to catch up!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"falling_behind",battleId:e.battleId}}]})}catch{}}async sendBattleVictory(e){try{await a.schedule({notifications:[{title:"üéâ VICTORY!",body:`You won ${e.name} and earned ${e.xp} XP!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"battle_won",battleId:e.battleId}}]})}catch{}}async sendBattleDefeat(e){try{await a.schedule({notifications:[{title:"üí™ Keep Pushing!",body:`You lost ${e.name}, but earned ${e.xp} XP. Join another battle!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"battle_lost",battleId:e.battleId}}]})}catch{}}async sendDailyChallenge(e){try{await a.schedule({notifications:[{title:"üî• Daily Battle Challenge!",body:`New challenge: ${e.name}. Complete before midnight!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"daily_challenge",challengeId:e.id}}]})}catch{}}async sendStreakRisk(e){try{await a.schedule({notifications:[{title:"‚ö†Ô∏è Streak at Risk!",body:`Your ${e.streak}-win streak expires today! Win a battle to save it.`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"streak_risk"}}]})}catch{}}async sendRivalUpdate(e){try{await a.schedule({notifications:[{title:"üëÄ Rival Update!",body:`${e.rivalName} just beat your score in ${e.battleName}!`,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",extra:{type:"rival_update",battleId:e.battleId}}]})}catch{}}async scheduleBattleEndingReminder(e){try{const t=new Date(e.endDate),n=new Date(t.getTime()-360*60*1e3);n>new Date&&await a.schedule({notifications:[{title:"‚è∞ Battle Ending Soon!",body:`6 hours left in ${e.name}. Make your final push!`,id:parseInt(e.battleId.replace(/\D/g,"").substring(0,8)),schedule:{at:n},sound:"default",extra:{type:"battle_ending",battleId:e.battleId}}]})}catch{}}async cancelBattleNotifications(e){try{const t=parseInt(e.replace(/\D/g,"").substring(0,8));await a.cancel({notifications:[{id:t}]})}catch{}}}const s=new i;export{s as battleNotificationsService,s as default};

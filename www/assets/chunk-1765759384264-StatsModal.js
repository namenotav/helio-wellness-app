import{r as h,g as p,a as C,j as s}from"./entry-1765759384261-index.js";function J({isOpen:r,onClose:c,todaySteps:g=0}){const[t,N]=h.useState({totalWorkouts:0,totalCaloriesBurned:0,totalSteps:0,todaySteps:0,avgSleepHours:0,mealsLogged:0,currentWeight:0,totalXP:0});h.useEffect(()=>{if(r){n();const e=setInterval(n,5e3);return()=>clearInterval(e)}},[r]);const n=async()=>{try{const e=p.getLevelInfo(),H=p.getStreakInfo(),W=JSON.parse(localStorage.getItem("health_data")||"{}"),x=JSON.parse(localStorage.getItem("workoutHistory")||"[]"),u=JSON.parse(localStorage.getItem("foodLog")||"[]");let i=g;const d=JSON.parse(localStorage.getItem("stepHistory")||"[]"),j=Array.isArray(d)?d.reduce((a,l)=>a+(Number(l?.steps)||0),0):0,v=new Date().toISOString().split("T")[0],S=JSON.parse(localStorage.getItem("workoutHistory")||"[]").filter(a=>a.date===v),f=Math.round(i*.04),y={Running:11,Cycling:10,Swimming:12,Weights:7,Yoga:3,HIIT:13,Walking:5,Sports:9,Other:7};let m=0;S.forEach(a=>{const l=a.type||a.activity||"Other",L=y[l]||7;m+=(a.duration||0)*L});const k=f+m,o=JSON.parse(localStorage.getItem("sleepLog")||"[]"),I=Array.isArray(o)?o.reduce((a,l)=>a+(Number(l?.hours)||Number(l?.duration)||0),0):0,b=o.length>0?I/o.length:0;N({totalWorkouts:x.length,totalCaloriesBurned:k,totalSteps:j,todaySteps:i,avgSleepHours:b,mealsLogged:u.length,currentWeight:C.getCurrentUser()?.profile?.weight||0,totalXP:e.totalXP||0})}catch{}};return r?s.jsx("div",{className:"modal-overlay",onClick:c,children:s.jsxs("div",{className:"stats-modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"ğŸ“Š Quick Stats"}),s.jsx("button",{className:"close-btn",onClick:c,children:"âœ•"})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ’ª"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:t.totalWorkouts}),s.jsx("span",{className:"stat-label",children:"Workouts"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ”¥"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:t.totalCaloriesBurned.toLocaleString()}),s.jsx("span",{className:"stat-label",children:"Calories Burned"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ‘Ÿ"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:t.todaySteps.toLocaleString()}),s.jsx("span",{className:"stat-label",children:"Steps Today"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ“Š"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[(t.totalSteps/1e3).toFixed(1),"K"]}),s.jsx("span",{className:"stat-label",children:"Total Steps"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ˜´"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[t.avgSleepHours.toFixed(1),"h"]}),s.jsx("span",{className:"stat-label",children:"Avg Sleep"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ½ï¸"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:t.mealsLogged}),s.jsx("span",{className:"stat-label",children:"Meals Logged"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"âš–ï¸"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[t.currentWeight,"kg"]}),s.jsx("span",{className:"stat-label",children:"Current Weight"})]})]}),s.jsxs("div",{className:"stat-item highlight",children:[s.jsx("span",{className:"stat-icon",children:"â­"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:t.totalXP.toLocaleString()}),s.jsx("span",{className:"stat-label",children:"Total XP Earned"})]})]})]})]})}):null}export{J as default};

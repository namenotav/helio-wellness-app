import{r as i,f as k,j as e,b as w}from"./entry-1765892656001-index.js";function S({isOpen:a,onClose:l}){const[o,n]=i.useState([]),[r,j]=i.useState(!0),[c,p]=i.useState(""),[t,N]=i.useState("all"),[h,y]=i.useState("all"),[g,u]=i.useState(null);i.useEffect(()=>{a&&f()},[a]);const f=async()=>{try{j(!0);const d=(await k.queryCollection("communityRecipes")).sort((m,x)=>new Date(x.createdAt)-new Date(m.createdAt));n(d),console.log(`âœ… Loaded ${d.length} community recipes`)}catch(s){console.error("Error loading recipes:",s),w("âŒ Failed to load recipes","error")}finally{j(!1)}},v=o.filter(s=>{const d=c===""||s.name?.toLowerCase().includes(c.toLowerCase())||s.cuisine?.toLowerCase().includes(c.toLowerCase())||s.category?.toLowerCase().includes(c.toLowerCase()),m=t==="all"||t==="halal"&&s.dietary?.halal||t==="vegetarian"&&s.dietary?.vegetarian||t==="vegan"&&s.dietary?.vegan||t==="glutenFree"&&s.dietary?.glutenFree,x=h==="all"||s.cuisine===h;return d&&m&&x}),C=["All",...new Set(o.map(s=>s.cuisine).filter(Boolean))];return a?g?e.jsx(b,{recipe:g,onClose:()=>u(null),onBack:()=>u(null)}):e.jsx("div",{className:"recipes-overlay",onClick:l,children:e.jsxs("div",{className:"recipes-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"recipes-header",children:[e.jsx("h2",{children:"ðŸ‘¨â€ðŸ³ Community Recipes"}),e.jsx("button",{className:"close-btn",onClick:l,children:"âœ•"})]}),e.jsxs("div",{className:"recipes-controls",children:[e.jsx("input",{type:"text",placeholder:"ðŸ” Search recipes...",value:c,onChange:s=>p(s.target.value),className:"recipe-search"}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("select",{value:t,onChange:s=>N(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Dietary"}),e.jsx("option",{value:"halal",children:"ðŸ•Œ Halal"}),e.jsx("option",{value:"vegetarian",children:"ðŸ¥— Vegetarian"}),e.jsx("option",{value:"vegan",children:"ðŸŒ± Vegan"}),e.jsx("option",{value:"glutenFree",children:"ðŸŒ¾ Gluten-Free"})]}),e.jsxs("select",{value:h,onChange:s=>y(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Cuisines"}),C.filter(s=>s!=="All").map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"recipes-grid",children:r?e.jsx("div",{className:"loading-state",children:"â³ Loading recipes..."}):v.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"ðŸ“ No recipes found"}),e.jsx("p",{children:"Be the first to share a recipe!"})]}):v.map(s=>e.jsxs("div",{className:"recipe-card",onClick:()=>u(s),children:[e.jsxs("div",{className:"recipe-card-header",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"recipe-category",children:s.category})]}),e.jsxs("div",{className:"recipe-card-meta",children:[e.jsxs("span",{children:["ðŸ´ ",s.cuisine]}),e.jsxs("span",{children:["ðŸ‘¤ ",s.servings," servings"]})]}),s.prepTime&&e.jsxs("div",{className:"recipe-time",children:["â±ï¸ ",s.prepTime," ",s.cookTime&&`+ ${s.cookTime}`]}),e.jsxs("div",{className:"recipe-dietary-tags",children:[s.dietary?.halal&&e.jsx("span",{className:"tag",children:"ðŸ•Œ Halal"}),s.dietary?.vegetarian&&e.jsx("span",{className:"tag",children:"ðŸ¥— Vegetarian"}),s.dietary?.vegan&&e.jsx("span",{className:"tag",children:"ðŸŒ± Vegan"}),s.dietary?.glutenFree&&e.jsx("span",{className:"tag",children:"ðŸŒ¾ GF"})]}),e.jsxs("div",{className:"recipe-card-footer",children:[e.jsxs("span",{children:["by ",s.author?.name||"Anonymous"]}),e.jsx("button",{className:"view-btn",children:"View Recipe â†’"})]})]},s.id))})]})}):null}function b({recipe:a,onClose:l,onBack:o}){return e.jsx("div",{className:"recipe-detail-overlay",onClick:l,children:e.jsxs("div",{className:"recipe-detail-modal",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"detail-header",children:[e.jsx("button",{className:"back-btn",onClick:o,children:"â† Back"}),e.jsx("button",{className:"close-btn",onClick:l,children:"âœ•"})]}),e.jsxs("div",{className:"detail-content",children:[e.jsx("h1",{children:a.name}),e.jsxs("div",{className:"detail-meta",children:[e.jsxs("span",{children:["ðŸ´ ",a.cuisine]}),e.jsxs("span",{children:["ðŸ“‚ ",a.category]}),e.jsxs("span",{children:["ðŸ‘¤ ",a.servings," servings"]})]}),(a.prepTime||a.cookTime)&&e.jsxs("div",{className:"detail-time",children:[a.prepTime&&e.jsxs("span",{children:["â±ï¸ Prep: ",a.prepTime]}),a.cookTime&&e.jsxs("span",{children:["ðŸ”¥ Cook: ",a.cookTime]})]}),e.jsxs("div",{className:"detail-dietary-tags",children:[a.dietary?.halal&&e.jsx("span",{className:"tag",children:"ðŸ•Œ Halal"}),a.dietary?.vegetarian&&e.jsx("span",{className:"tag",children:"ðŸ¥— Vegetarian"}),a.dietary?.vegan&&e.jsx("span",{className:"tag",children:"ðŸŒ± Vegan"}),a.dietary?.glutenFree&&e.jsx("span",{className:"tag",children:"ðŸŒ¾ Gluten-Free"})]}),a.nutrition&&(a.nutrition.calories>0||a.nutrition.protein>0)&&e.jsxs("div",{className:"nutrition-info",children:[e.jsx("h3",{children:"ðŸ“Š Nutrition (per serving)"}),e.jsxs("div",{className:"nutrition-grid",children:[a.nutrition.calories>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Calories:"})," ",a.nutrition.calories]}),a.nutrition.protein>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Protein:"})," ",a.nutrition.protein,"g"]}),a.nutrition.carbs>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Carbs:"})," ",a.nutrition.carbs,"g"]}),a.nutrition.fat>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Fat:"})," ",a.nutrition.fat,"g"]})]})]}),e.jsxs("div",{className:"ingredients-section",children:[e.jsx("h3",{children:"ðŸ¥˜ Ingredients"}),e.jsx("ul",{children:a.ingredients?.map((n,r)=>e.jsxs("li",{children:[n.quantity&&`${n.quantity} `,n.unit&&`${n.unit} `,n.name]},r))})]}),e.jsxs("div",{className:"instructions-section",children:[e.jsx("h3",{children:"ðŸ‘¨â€ðŸ³ Instructions"}),e.jsx("div",{className:"instructions-text",children:a.instructions?.split(`
`).map((n,r)=>e.jsx("p",{children:n},r))})]}),e.jsxs("div",{className:"recipe-author",children:[e.jsxs("p",{children:["Recipe by ",e.jsx("strong",{children:a.author?.name||"Anonymous"})]}),e.jsxs("p",{className:"recipe-date",children:["Shared ",new Date(a.createdAt).toLocaleDateString()]})]})]})]})})}export{S as default};

import{r as u,j as n}from"./entry-1765888035645-index.js";let x=0;function P({points:s,x:r=50,y:p=50,onComplete:o}){const[e,a]=u.useState(!0),[i]=u.useState(()=>x++);return u.useEffect(()=>{const l=parseInt(localStorage.getItem("user_xp")||"0")+s;localStorage.setItem("user_xp",l.toString());const t=parseInt(localStorage.getItem("user_level")||"1"),c=t*1e3;l>=c&&(localStorage.setItem("user_level",(t+1).toString()),window.dispatchEvent(new CustomEvent("levelUp",{detail:{level:t+1}})));const m=setTimeout(()=>{a(!1),o&&o()},2e3);return()=>clearTimeout(m)},[s,o]),e?n.jsx("div",{className:"points-popup",style:{left:`${r}%`,top:`${p}%`,animationDelay:`${i*.1}s`},children:n.jsxs("span",{className:"points-value",children:["+",s," XP"]})}):null}function v(){const[s,r]=u.useState([]);return{addPoints:(e,a={})=>{const i=Date.now()+Math.random(),d=a.x||40+Math.random()*20,l=a.y||40+Math.random()*20;r(t=>[...t,{id:i,points:e,x:d,y:l}]),setTimeout(()=>{r(t=>t.filter(c=>c.id!==i))},2500)},PopupsRenderer:()=>n.jsx(n.Fragment,{children:s.map(e=>n.jsx(P,{points:e.points,x:e.x,y:e.y},e.id))})}}export{v as u};

import{r as y,g as j,j as e}from"./entry-1765759384261-index.js";function M({todaySteps:a=0}){console.log("üé® [TodayOverview] Component mounted/updated - todaySteps prop:",a);const[s,w]=y.useState({streak:0,level:1,xp:0,xpToNext:1e3,steps:0,stepsGoal:1e4,calories:0,caloriesGoal:2e3,activeMinutes:0,activeMinutesGoal:60,waterCups:0,waterGoal:8,sleepHours:0,sleepGoal:8,workoutMinutes:0,workoutGoal:30});y.useEffect(()=>{console.log("üîÑ [TodayOverview] useEffect triggered - todaySteps changed to:",a),h();const t=setInterval(h,1e4);return()=>clearInterval(t)},[a]);const h=async()=>{console.log("üöÄ [TodayOverview] loadStats() EXECUTING - todaySteps:",a);try{console.log("üìä [TodayOverview] Getting gamification data...");const t=j.getLevelInfo(),i=j.getStreakInfo();console.log("üìä [TodayOverview] Level info:",t),console.log("üìä [TodayOverview] Streak info:",i);const d=new Date().toISOString().split("T")[0],N=JSON.parse(localStorage.getItem("health_data")||"{}");let n=a;console.log("üëü [TodayOverview] Received todaySteps prop:",a,"‚Üí Setting steps to:",n);const x=JSON.parse(localStorage.getItem("waterLog")||"[]").filter(o=>o.date===d).reduce((o,r)=>o+(r.cups||1),0);console.log("üíß [TodayOverview] Water today:",x,"cups");const p=JSON.parse(localStorage.getItem("sleepLog")||"[]").find(o=>o.date===d),g=p&&(p.duration||p.hours)||0;console.log("üò¥ [TodayOverview] Sleep today:",g,"hours");const u=JSON.parse(localStorage.getItem("workoutHistory")||"[]").filter(o=>o.date===d),c=u.reduce((o,r)=>o+(r.duration||0),0);console.log("üí™ [TodayOverview] Workouts today:",c,"minutes");const f=Math.round(n*.04),k={Running:11,Cycling:10,Swimming:12,Weights:7,Yoga:3,HIIT:13,Walking:5,Sports:9,Other:7};let v=0;u.forEach(o=>{const r=o.type||o.activity||"Other",S=k[r]||7;v+=(o.duration||0)*S});const m=f+v;console.log("üî• [TodayOverview] Calories - Steps:",f,"Workouts:",v,"Total:",m),w({streak:i.streak||0,level:t.level||1,xp:t.xp||0,xpToNext:t.xpToNext||1e3,steps:n,stepsGoal:1e4,calories:m,caloriesGoal:2e3,activeMinutes:c,activeMinutesGoal:60,waterCups:x,waterGoal:8,sleepHours:g,sleepGoal:8,workoutMinutes:c,workoutGoal:30}),console.log("‚úÖ [TodayOverview] Stats updated - steps:",n,"water:",x,"sleep:",g,"workout:",c)}catch(t){console.error("‚ùå [TodayOverview] loadStats() FAILED:",t),console.error("‚ùå [TodayOverview] Error stack:",t.stack)}},l=(t,i)=>Math.min(Math.round(t/i*100),100);return e.jsxs("div",{className:"today-overview",children:[e.jsxs("div",{className:"overview-header",children:[e.jsxs("div",{className:"streak-badge",children:[e.jsx("span",{className:"streak-icon",children:"üî•"}),e.jsxs("span",{className:"streak-text",children:[s.streak," DAY STREAK"]})]}),e.jsxs("div",{className:"level-badge",children:[e.jsxs("span",{className:"level-text",children:["Level ",s.level]}),e.jsx("span",{className:"level-icon",children:"‚≠ê"})]})]}),e.jsxs("div",{className:"xp-progress",children:[e.jsxs("div",{className:"xp-text",children:[e.jsxs("span",{children:[s.xp.toLocaleString()," XP"]}),e.jsxs("span",{className:"xp-goal",children:["/ ",s.xpToNext.toLocaleString()," to Level ",s.level+1]})]}),e.jsx("div",{className:"xp-bar",children:e.jsx("div",{className:"xp-fill",style:{width:`${l(s.xp,s.xpToNext)}%`}})})]}),e.jsxs("div",{className:"activity-rings",children:[e.jsxs("svg",{viewBox:"0 0 200 200",className:"rings-svg",children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"#333",strokeWidth:"12",opacity:"0.2"}),e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"url(#moveGradient)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*80*(l(s.steps,s.stepsGoal)/100)} ${2*Math.PI*80}`,transform:"rotate(-90 100 100)",className:"ring-animated"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"#333",strokeWidth:"12",opacity:"0.2"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"url(#exerciseGradient)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*60*(l(s.activeMinutes,s.activeMinutesGoal)/100)} ${2*Math.PI*60}`,transform:"rotate(-90 100 100)",className:"ring-animated"}),e.jsx("circle",{cx:"100",cy:"100",r:"40",fill:"none",stroke:"#333",strokeWidth:"12",opacity:"0.2"}),e.jsx("circle",{cx:"100",cy:"100",r:"40",fill:"none",stroke:"url(#caloriesGradient)",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*40*(l(s.calories,s.caloriesGoal)/100)} ${2*Math.PI*40}`,transform:"rotate(-90 100 100)",className:"ring-animated"}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"moveGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ff006e"}),e.jsx("stop",{offset:"100%",stopColor:"#ff4d94"})]}),e.jsxs("linearGradient",{id:"exerciseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00f5a0"}),e.jsx("stop",{offset:"100%",stopColor:"#00d9f5"})]}),e.jsxs("linearGradient",{id:"caloriesGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4cc9f0"}),e.jsx("stop",{offset:"100%",stopColor:"#4361ee"})]})]})]}),e.jsxs("div",{className:"ring-labels",children:[e.jsxs("div",{className:"ring-label move",children:[e.jsx("span",{className:"label-icon",children:"üëü"}),e.jsxs("span",{className:"label-text",children:[s.steps.toLocaleString(),"/",(s.stepsGoal/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"ring-label exercise",children:[e.jsx("span",{className:"label-icon",children:"üí™"}),e.jsxs("span",{className:"label-text",children:[s.activeMinutes,"/",s.activeMinutesGoal,"min"]})]}),e.jsxs("div",{className:"ring-label calories",children:[e.jsx("span",{className:"label-icon",children:"üî•"}),e.jsxs("span",{className:"label-text",children:[s.calories,"/",s.caloriesGoal,"cal"]})]})]})]}),e.jsxs("div",{className:"quick-log-stats",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginTop:"16px",padding:"0 4px"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",borderRadius:"12px",padding:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(79, 172, 254, 0.3)"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"4px"},children:"üíß"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"bold"},children:s.waterCups}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"11px",marginTop:"2px"},children:["/",s.waterGoal," cups"]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"4px"},children:"üò¥"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"bold"},children:s.sleepHours.toFixed(1)}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"11px",marginTop:"2px"},children:["/",s.sleepGoal,"h"]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",borderRadius:"12px",padding:"12px",textAlign:"center",boxShadow:"0 2px 8px rgba(250, 112, 154, 0.3)"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"4px"},children:"üèãÔ∏è"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"bold"},children:s.workoutMinutes}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"11px",marginTop:"2px"},children:["/",s.workoutGoal,"min"]})]})]})]})}export{M as default};

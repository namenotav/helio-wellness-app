import{r as h,g as p,a as L,j as s}from"./entry-1765889059086-index.js";function O({isOpen:c,onClose:r,todaySteps:g=0}){const[a,N]=h.useState({totalWorkouts:0,totalCaloriesBurned:0,totalSteps:0,todaySteps:0,avgSleepHours:0,mealsLogged:0,currentWeight:0,totalXP:0});h.useEffect(()=>{if(c){n();const e=setInterval(n,5e3);return()=>clearInterval(e)}},[c]);const n=async()=>{try{const e=p.getLevelInfo(),C=p.getStreakInfo(),W=JSON.parse(localStorage.getItem("health_data")||"{}"),x=JSON.parse(localStorage.getItem("workoutHistory")||"[]"),j=JSON.parse(localStorage.getItem("foodLog")||"[]");let u=g;const i=JSON.parse(localStorage.getItem("stepHistory")||"[]"),d=Array.isArray(i)?i.reduce((t,l)=>t+(Number(l?.steps)||0),0):0,H=new Date().toISOString().split("T")[0],v=JSON.parse(localStorage.getItem("workoutHistory")||"[]"),S=Math.round(d*.04),f={Running:11,Cycling:10,Swimming:12,Weights:7,Yoga:3,HIIT:13,Walking:5,Sports:9,Other:7};let m=0;v.forEach(t=>{const l=t.type||t.activity||"Other",b=f[l]||7;m+=(t.duration||0)*b});const y=S+m,o=JSON.parse(localStorage.getItem("sleepLog")||"[]"),k=Array.isArray(o)?o.reduce((t,l)=>t+(Number(l?.hours)||Number(l?.duration)||0),0):0,I=o.length>0?k/o.length:0;N({totalWorkouts:x.length,totalCaloriesBurned:y,totalSteps:d,todaySteps:u,avgSleepHours:I,mealsLogged:j.length,currentWeight:L.getCurrentUser()?.profile?.weight||0,totalXP:e.totalXP||0})}catch{}};return c?s.jsx("div",{className:"modal-overlay",onClick:r,children:s.jsxs("div",{className:"stats-modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"ğŸ“Š Quick Stats"}),s.jsx("button",{className:"close-btn",onClick:r,children:"âœ•"})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ’ª"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:a.totalWorkouts}),s.jsx("span",{className:"stat-label",children:"Workouts"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ”¥"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:a.totalCaloriesBurned.toLocaleString()}),s.jsx("span",{className:"stat-label",children:"Total Calories"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ‘Ÿ"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:a.todaySteps.toLocaleString()}),s.jsx("span",{className:"stat-label",children:"Steps Today"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ“Š"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[(a.totalSteps/1e3).toFixed(1),"K"]}),s.jsx("span",{className:"stat-label",children:"Total Steps"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ˜´"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[a.avgSleepHours.toFixed(1),"h"]}),s.jsx("span",{className:"stat-label",children:"Avg Sleep"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ğŸ½ï¸"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:a.mealsLogged}),s.jsx("span",{className:"stat-label",children:"Meals Logged"})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"âš–ï¸"}),s.jsxs("div",{className:"stat-info",children:[s.jsxs("span",{className:"stat-value",children:[a.currentWeight,"kg"]}),s.jsx("span",{className:"stat-label",children:"Current Weight"})]})]}),s.jsxs("div",{className:"stat-item highlight",children:[s.jsx("span",{className:"stat-icon",children:"â­"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-value",children:a.totalXP.toLocaleString()}),s.jsx("span",{className:"stat-label",children:"Total XP Earned"})]})]})]})]})}):null}export{O as default};

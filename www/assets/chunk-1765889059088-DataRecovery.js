import{r as c,c as i,j as e}from"./entry-1765889059086-index.js";const y=({onClose:h})=>{const[p,o]=c.useState(null),[r,n]=c.useState(!1),[l,d]=c.useState(!1),[u,s]=c.useState("");c.useEffect(()=>{m()},[]);const m=async()=>{const a=await i.getLastBackupTime();o(a?new Date(a).toLocaleString():"Never")},x=async()=>{try{n(!0),s("ğŸ”„ Backing up all data to cloud...");const a=await i.manualBackupToCloud();a.success?(s(`âœ… Backup complete! ${a.backedUpCount} items saved to cloud.`),await m()):s(`âŒ Backup failed: ${a.error}`)}catch(a){s(`âŒ Backup error: ${a.message}`)}finally{n(!1),setTimeout(()=>s(""),5e3)}},j=async()=>{if(window.confirm("âš ï¸ This will restore ALL data from your last cloud backup. Your current local data will be replaced. Continue?"))try{d(!0),s("ğŸ”„ Restoring all data from cloud...");const t=await i.manualRestoreFromCloud();t.success?(s(`âœ… Restore complete! ${t.restoredCount} items restored from cloud.`),setTimeout(()=>{window.location.reload()},2e3)):s(`âŒ Restore failed: ${t.error}`)}catch(t){s(`âŒ Restore error: ${t.message}`)}finally{d(!1)}};return e.jsx("div",{className:"data-recovery-overlay",children:e.jsxs("div",{className:"data-recovery-modal",children:[e.jsxs("div",{className:"data-recovery-header",children:[e.jsx("h2",{children:"ğŸ’¾ Data Backup & Recovery"}),e.jsx("button",{className:"close-btn",onClick:h,children:"âœ•"})]}),e.jsxs("div",{className:"data-recovery-content",children:[e.jsxs("div",{className:"backup-status",children:[e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Last Backup:"}),e.jsx("span",{className:"status-value",children:p||"Loading..."})]}),e.jsx("p",{className:"status-info",children:"â„¹ï¸ Your data is automatically backed up to the cloud when you're online. Use manual backup for immediate protection."})]}),e.jsxs("div",{className:"recovery-actions",children:[e.jsx("button",{className:"backup-btn",onClick:x,disabled:r||l,children:r?"â³ Backing up...":"â˜ï¸ Backup Now"}),e.jsx("button",{className:"restore-btn",onClick:j,disabled:r||l,children:l?"â³ Restoring...":"ğŸ”„ Restore from Cloud"})]}),u&&e.jsx("div",{className:"status-message",children:u}),e.jsxs("div",{className:"data-info",children:[e.jsx("h3",{children:"ğŸ“¦ What's Backed Up:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"âœ… Step history & activity data"}),e.jsx("li",{children:"âœ… Food logs & meal plans"}),e.jsx("li",{children:"âœ… Workout history & rep counter"}),e.jsx("li",{children:"âœ… Sleep tracking data"}),e.jsx("li",{children:"âœ… Heart rate measurements"}),e.jsx("li",{children:"âœ… Meditation & breathing sessions"}),e.jsx("li",{children:"âœ… Emergency contacts & medical info"}),e.jsx("li",{children:"âœ… DNA analysis results"}),e.jsx("li",{children:"âœ… Profile & preferences"}),e.jsx("li",{children:"âœ… Health avatar data"})]})]}),e.jsxs("div",{className:"data-security",children:[e.jsxs("p",{children:["ğŸ”’ ",e.jsx("strong",{children:"Your data is secure:"})]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Stored in your private Firebase account"}),e.jsx("li",{children:"End-to-end encrypted transmission"}),e.jsx("li",{children:"Only you can access your data"}),e.jsx("li",{children:"Backed up to 3 locations: Device, Preferences, Cloud"})]})]})]})]})})};export{y as default};

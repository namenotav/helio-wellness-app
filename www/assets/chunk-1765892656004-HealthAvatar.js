import{r as i,j as a}from"./entry-1765892656001-index.js";import{healthAvatarService as c}from"./chunk-1765892656004-healthAvatarService.js";function y({onClose:d}){const[n,x]=i.useState(null),[t,l]=i.useState("current"),[p,m]=i.useState(!0);i.useEffect(()=>{o();const e=setInterval(o,1e4);return()=>clearInterval(e)},[]);const o=async()=>{const e=await c.getAvatarState(!0);x(e),m(!1)},s=(()=>{if(!n)return null;switch(t){case"current":return n.current;case"1year":return{...n.future1Year,visuals:c.getAvatarVisuals(n.future1Year.score)};case"5years":return{...n.future5Years,visuals:c.getAvatarVisuals(n.future5Years.score)};case"10years":return{...n.future10Years,visuals:c.getAvatarVisuals(n.future10Years.score)};default:return n.current}})();return p?a.jsx("div",{className:"avatar-overlay",children:a.jsx("div",{className:"avatar-modal",children:a.jsx("h2",{children:"â³ Loading your health avatar..."})})}):a.jsx("div",{className:"avatar-overlay",children:a.jsxs("div",{className:"avatar-modal",children:[a.jsx("button",{className:"avatar-close",onClick:d,children:"âœ•"}),a.jsx("h2",{className:"avatar-title",children:"ðŸ§¬ Your Health Avatar"}),a.jsxs("div",{className:"health-disclaimer",style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"8px",padding:"10px",margin:"10px 0",fontSize:"12px",color:"#FFA500"},children:["âš ï¸ ",a.jsx("strong",{children:"Not Medical Advice:"})," This is an educational estimate based on your activity data. Always consult healthcare professionals for medical decisions."]}),a.jsxs("div",{className:"avatar-timeline",children:[a.jsx("button",{className:`timeline-btn ${t==="current"?"active":""}`,onClick:()=>l("current"),children:"NOW"}),a.jsx("button",{className:`timeline-btn ${t==="1year"?"active":""}`,onClick:()=>l("1year"),children:"+1 YEAR"}),a.jsx("button",{className:`timeline-btn ${t==="5years"?"active":""}`,onClick:()=>l("5years"),children:"+5 YEARS"}),a.jsx("button",{className:`timeline-btn ${t==="10years"?"active":""}`,onClick:()=>l("10years"),children:"+10 YEARS"})]}),s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"avatar-display","data-glow":s.visuals?.glowEffect||"none",children:[a.jsx("div",{className:"avatar-character",children:a.jsx("div",{className:"avatar-emoji",style:{filter:s.visuals?.eyeBrightness==="dull"?"grayscale(0.5)":"none",opacity:s.visuals?.energyLevel==="low"?.7:1},children:s.visuals?.overallMood||"ðŸ˜Š"})}),a.jsxs("div",{className:"health-score-circle",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#333",strokeWidth:"8"}),a.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:s.score>=70?"#44FF44":s.score>=50?"#FFA500":"#FF4444",strokeWidth:"8",strokeDasharray:`${2*Math.PI*45*(s.score/100)} ${2*Math.PI*45}`,transform:"rotate(-90 50 50)"})]}),a.jsxs("div",{className:"score-text",children:[a.jsx("span",{className:"score-number",children:s.score}),a.jsx("span",{className:"score-label",children:"Health Score"}),t==="current"&&s.dataCompleteness!==void 0&&a.jsxs("span",{className:"data-quality",style:{fontSize:"11px",color:s.dataCompleteness>=70?"#44FF44":"#FFA500",marginTop:"5px",display:"block"},children:["Based on ",s.dataCompleteness,"% complete data",s.dataCompleteness<70&&" âš ï¸"]})]})]})]}),t!=="current"&&a.jsxs("div",{className:"age-warning",children:[a.jsxs("h3",{children:["âš ï¸ You'll look ",s.ageAppearance," years old"]}),a.jsxs("p",{children:["Actual age: ",n.current.age+parseInt(t.replace(/\D/g,""))]})]}),t==="current"&&s.emergencyWarnings&&s.emergencyWarnings.length>0&&a.jsxs("div",{className:"emergency-warnings",style:{background:"rgba(255, 68, 68, 0.1)",border:"2px solid #FF4444",borderRadius:"12px",padding:"15px",margin:"15px 0"},children:[a.jsx("h3",{style:{color:"#FF4444",margin:"0 0 10px 0"},children:"ðŸš¨ Health Alerts"}),s.emergencyWarnings.map((e,r)=>a.jsxs("div",{style:{background:e.severity==="critical"?"rgba(255, 0, 0, 0.15)":"rgba(255, 152, 0, 0.15)",border:`1px solid ${e.severity==="critical"?"#FF0000":"#FFA500"}`,borderRadius:"8px",padding:"12px",marginBottom:"10px"},children:[a.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"5px"},children:[e.icon," ",e.title]}),a.jsx("div",{style:{fontSize:"14px",marginBottom:"5px"},children:e.message}),a.jsxs("div",{style:{fontSize:"12px",fontStyle:"italic",color:"#FFA500"},children:["ðŸ‘‰ ",e.action]})]},r))]}),t==="current"&&s.scoreBreakdown&&s.scoreBreakdown.length>0&&a.jsxs("div",{className:"score-breakdown",style:{background:"rgba(68, 255, 68, 0.05)",border:"1px solid rgba(68, 255, 68, 0.3)",borderRadius:"12px",padding:"15px",margin:"15px 0"},children:[a.jsx("h3",{style:{margin:"0 0 15px 0"},children:"ðŸ“Š Score Breakdown"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.scoreBreakdown.map((e,r)=>a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:e.points>0?"rgba(68, 255, 68, 0.1)":e.points<0?"rgba(255, 68, 68, 0.1)":"rgba(128, 128, 128, 0.1)",borderRadius:"8px",border:`1px solid ${e.points>0?"#44FF44":e.points<0?"#FF4444":"#888"}`},children:[a.jsxs("span",{style:{fontSize:"14px"},children:[e.icon," ",e.factor]}),a.jsxs("span",{style:{fontSize:"16px",fontWeight:"bold",color:e.points>0?"#44FF44":e.points<0?"#FF4444":"#888"},children:[e.points>0?"+":"",e.points]})]},r))}),a.jsxs("div",{style:{marginTop:"15px",padding:"10px",background:"rgba(68, 255, 68, 0.15)",borderRadius:"8px",textAlign:"center",fontSize:"14px"},children:["ðŸ’¡ ",a.jsx("strong",{children:"Your Score:"})," ",s.score,"/100 (Higher is better!)"]})]}),t==="current"&&s.suggestions&&s.suggestions.length>0&&a.jsxs("div",{className:"improvement-suggestions",style:{background:"rgba(255, 152, 0, 0.05)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"12px",padding:"15px",margin:"15px 0"},children:[a.jsx("h3",{style:{margin:"0 0 15px 0",color:"#FFA500"},children:"ðŸ’¡ Top Improvements"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:s.suggestions.map((e,r)=>a.jsxs("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.4)",borderRadius:"8px",padding:"12px"},children:[a.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"5px"},children:[e.icon," ",e.action]}),a.jsxs("div",{style:{fontSize:"13px",color:"#44FF44",marginBottom:"3px"},children:["Impact: ",e.impact]}),a.jsx("div",{style:{fontSize:"12px",fontStyle:"italic",opacity:.8},children:e.reason})]},r))})]}),t==="current"&&s.dataBreakdown&&a.jsxs("div",{className:"data-sources",children:[a.jsx("h3",{children:"ðŸ“Š Your Real Health Data"}),a.jsxs("div",{className:"data-grid",children:[a.jsxs("div",{className:"data-source",children:[a.jsx("span",{className:"data-icon",children:"ðŸ‘Ÿ"}),a.jsxs("span",{className:"data-label",children:["Monthly Steps (",s.dataBreakdown.monthName,")"]}),a.jsx("span",{className:"data-value",children:(s.dataBreakdown.totalMonthlySteps||0).toLocaleString()}),a.jsxs("span",{className:"data-subtext",children:[s.dataBreakdown.stepsDays," days this month"]})]}),a.jsxs("div",{className:"data-source",children:[a.jsx("span",{className:"data-icon",children:"ðŸ½ï¸"}),a.jsxs("span",{className:"data-label",children:["Food Scans (",s.dataBreakdown.monthName,")"]}),a.jsx("span",{className:"data-value",children:s.dataBreakdown.foodLogsCount}),a.jsx("span",{className:"data-subtext",children:"This month"})]}),a.jsxs("div",{className:"data-source",children:[a.jsx("span",{className:"data-icon",children:"ðŸ’ª"}),a.jsxs("span",{className:"data-label",children:["Workouts (",s.dataBreakdown.monthName,")"]}),a.jsx("span",{className:"data-value",children:s.dataBreakdown.workoutsCount}),a.jsx("span",{className:"data-subtext",children:"This month"})]}),a.jsxs("div",{className:"data-source",children:[a.jsx("span",{className:"data-icon",children:"ðŸ§¬"}),a.jsx("span",{className:"data-label",children:"DNA Analysis"}),a.jsx("span",{className:"data-value",children:s.dataBreakdown.hasDNAAnalysis?"âœ…":"âŒ"}),a.jsx("span",{className:"data-subtext",children:s.dataBreakdown.hasDNAAnalysis?"Uploaded":"Not uploaded"})]}),a.jsxs("div",{className:"data-source",children:[a.jsx("span",{className:"data-icon",children:"ðŸ˜´"}),a.jsxs("span",{className:"data-label",children:["Sleep Logs (",s.dataBreakdown.monthName,")"]}),a.jsx("span",{className:"data-value",children:s.dataBreakdown.sleepLogsCount}),a.jsx("span",{className:"data-subtext",children:"This month"})]})]}),a.jsxs("p",{className:"data-note",children:["ðŸ’¡ Your health score is calculated from ",a.jsx("strong",{children:"real activity data"})," - not estimates!"]})]}),t==="current"&&s.dataBreakdown.stepHistory&&s.dataBreakdown.stepHistory.length>0&&a.jsxs("div",{className:"step-history-section",children:[a.jsxs("h3",{children:["ðŸ“… ",s.dataBreakdown.monthName," ",s.dataBreakdown.currentYear," Step History"]}),a.jsx("div",{className:"step-history-list",children:s.dataBreakdown.stepHistory.slice().sort((e,r)=>(r.date||"").localeCompare(e.date||"")).map((e,r)=>{const u=e?.steps||0,h=e?.date||"Unknown";return a.jsxs("div",{className:"step-history-item",children:[a.jsx("span",{className:"history-date",children:h}),a.jsxs("span",{className:"history-steps",children:[u.toLocaleString()," steps"]})]},h+r)})}),a.jsxs("div",{className:"history-summary",children:[a.jsxs("span",{children:["ðŸ“Š Total: ",s.dataBreakdown.totalMonthlySteps.toLocaleString()," steps"]}),a.jsxs("span",{children:["ðŸ“ˆ Average: ",s.dataBreakdown.avgDailySteps.toLocaleString()," steps/day"]})]})]}),a.jsxs("div",{className:"avatar-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-icon",children:"ðŸ’ª"}),a.jsx("span",{className:"stat-label",children:"Muscle"}),a.jsx("span",{className:"stat-value",children:s.visuals?.muscleTone})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-icon",children:"âš¡"}),a.jsx("span",{className:"stat-label",children:"Energy"}),a.jsx("span",{className:"stat-value",children:s.visuals?.energyLevel})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-icon",children:"âœ¨"}),a.jsx("span",{className:"stat-label",children:"Glow"}),a.jsx("span",{className:"stat-value",children:s.visuals?.glowEffect})]})]}),t!=="current"&&s.warnings&&s.warnings.length>0&&a.jsxs("div",{className:"avatar-warnings",children:[a.jsx("h3",{children:"âš ï¸ Health Warnings"}),a.jsx("ul",{children:s.warnings.map((e,r)=>a.jsx("li",{children:e},r))})]}),t!=="current"&&s.improvements&&s.improvements.length>0&&a.jsxs("div",{className:"avatar-improvements",children:[a.jsx("h3",{children:"ðŸ’¡ How to Improve"}),a.jsx("ul",{children:s.improvements.map((e,r)=>a.jsx("li",{children:e},r))})]}),t!=="current"&&s.score<n.current.score&&a.jsxs("div",{className:"avatar-cta",children:[a.jsx("h3",{children:"ðŸš€ Change Your Future NOW!"}),a.jsx("p",{children:"Small changes today = huge impact on your future health"}),a.jsx("button",{className:"cta-button",onClick:d,children:"Start Improving Today"})]})]})]})})}export{y as default};
